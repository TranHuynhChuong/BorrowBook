import{r as b,u as X,o as _,a as D,c as u,b as o,t as w,d as H,e as c,v as p,l as x,h as M,i as h,B as y}from"./index-C1K4ce6N.js";import{p as f}from"./publisher_service-B5UwPzYN.js";import{S}from"./sweetalert2.esm.all-DwEdJQJv.js";const V={class:"w-full h-full rounded-xl bg-white"},j={class:"rounded-xl w-full h-full bg-white"},z={class:"rounded-xl w-full h-full bg-white"},F={class:"text-xl font-bold mb-6 text-center whitespace-nowrap"},U={key:0},W=["disabled"],E=["disabled"],L={class:"flex justify-end space-x-1"},P={key:0,type:"submit",class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm font-medium rounded-md text-white bg-indigo-500 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-700 whitespace-nowrap"},Q={__name:"managePublisherForm",props:{action:{type:String},id:{type:Object}},setup(v){const m=b(null),l=M(),r=X(),i=b({}),s=v,B=n=>{switch(n){case"add":return"Thêm Nhà Xuất Bản";case"update":return"Cập nhật Nhà Xuất Bản";case"view":return"Chi tiết Nhà Xuất Bản";default:return"Hành động không xác định"}},g=()=>{l.go(-1)},C=async()=>{(await S.fire({title:"Xác nhận lưu?",text:"Bạn có chắc muốn lưu các thay đổi này?",icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Lưu",cancelButtonText:"Hủy"})).isConfirmed&&await N()},N=async()=>{var n,e;try{const t={TenNXB:i.value.TenNXB,DiaChi:i.value.DiaChi};if(console.log(t),s.action==="add"){const a=await f.create(t);y.emit("reload"),r.success(a.message),l.go(-1)}else if(s.action==="update"){const a=await f.update(s.id,t);y.emit("reload"),r.success(a.message),l.go(-1)}}catch(t){console.log(t);const a=((e=(n=t.response)==null?void 0:n.data)==null?void 0:e.message)||"Có lỗi xảy ra. Vui lòng thử lại.";r.error(a)}};function d(){const n=m.value;if(n){const e=window.innerHeight,t=window.innerWidth,a=parseFloat(window.getComputedStyle(n).padding),k=e-2*a,T=t-2*a;n.style.maxHeight=`${k}px`,n.style.maxWidth=`${T}px`}}return _(async()=>{var n,e;if(d(),window.addEventListener("resize",d),s.action!=="add")try{const t=await f.get(s.id);i.value={...t}}catch(t){const a=((e=(n=t.response)==null?void 0:n.data)==null?void 0:e.message)||"Có lỗi xảy ra. Vui lòng thử lại.";r.error(a)}else i.value={TenNXB:"",DiaChi:""}}),D(()=>{window.removeEventListener("resize",d)}),(n,e)=>(h(),u("div",null,[o("div",{class:"absolute inset-0 bg-black opacity-50 z-30",onClick:g}),o("div",{ref_key:"formContainer",ref:m,class:"fixed bg-white z-40 box-border overflow-y-auto overflow-x-hidden rounded-xl w-fit top-1/2 -translate-y-1/2 left-1/2 -translate-x-1/2 p-6 border-2 shadow-md",style:{"scrollbar-gutter":"stable","clip-path":"inset(0 round 10px)"}},[o("div",V,[o("div",j,[o("div",z,[o("h2",F,w(B(s.action)),1),o("form",{onSubmit:H(C,["prevent"]),class:"space-y-4"},[s.action!=="add"?(h(),u("div",U,[e[3]||(e[3]=o("label",{for:"ma-nxb",class:"block font-medium text-gray-700 whitespace-nowrap"},"Mã NXB",-1)),c(o("input",{type:"text",id:"ma-nxb","onUpdate:modelValue":e[0]||(e[0]=t=>i.value.MaNXB=t),disabled:!0,placeholder:"Nhập mã nhà xuất bản",class:"mt-1 block w-full px-3 py-2 border border-[#aaa] rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[p,i.value.MaNXB]])])):x("",!0),o("div",null,[e[4]||(e[4]=o("label",{for:"ten-nxb",class:"block font-medium text-gray-700 whitespace-nowrap"},"Tên NXB",-1)),c(o("input",{type:"text",id:"ten-nxb","onUpdate:modelValue":e[1]||(e[1]=t=>i.value.TenNXB=t),disabled:s.action==="view",placeholder:"Nhập tên nhà xuất bản",class:"mt-1 block w-full px-3 py-2 border border-[#aaa] rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,8,W),[[p,i.value.TenNXB]])]),o("div",null,[e[5]||(e[5]=o("label",{for:"dia-chi",class:"block font-medium text-gray-700 whitespace-nowrap"},"Địa Chỉ",-1)),c(o("input",{type:"text",id:"dia-chi","onUpdate:modelValue":e[2]||(e[2]=t=>i.value.DiaChi=t),disabled:s.action==="view",placeholder:"Xã/Phường, Quận/Huyện, Tỉnh/Thành phố",class:"mt-1 block w-full px-3 py-2 border border-[#aaa] rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"},null,8,E),[[p,i.value.DiaChi]])]),o("div",L,[o("button",{type:"button",onClick:g,class:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm font-medium rounded-md text-white bg-gray-400 hover:bg-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 whitespace-nowrap"},w(s.action==="view"?"Thoát":"Hủy"),1),s.action!=="view"?(h(),u("button",P," Xác Nhận ")):x("",!0)])],32)])])])],512)]))}};export{Q as default};
