import{b as h}from"./book_service-CvQVwSpB.js";import{h as _,r as m,w as v,o as g,a as k,i as r,c as n,b as s,t as p,u as w,k as B,l as F,F as $,m as D,n as I,p as q}from"./index-bggiZOz8.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"w-full h-full relative flex items-end"},C={class:"h-full w-fit bg-slate-300 overflow-hidden rounded-md shadow-lg scale-image"},L=["src"],R={class:"bg-transparent h-full pl-5 pt-3 space-y-2 flex-1 flex items-end"},S={class:"w-full h-2/3"},U={class:"book-title text-lg font-semibold"},E={class:"book-title text-sm"},O={__name:"BookItem",props:{item:{type:Object}},setup(d){const c=_(),u=d,l=m(null),f=async()=>{const a=await h.getImg(u.item.BiaSach);l.value=URL.createObjectURL(a)};v(()=>u.item,(a,o)=>{a!==o&&f()},{deep:!0});const i=()=>{c.push({name:"bookDetail",params:{id:u.item._id}})};return g(async()=>{f()}),k(()=>{}),(a,o)=>(r(),n("div",j,[s("div",{class:"absolute w-full h-full p-5 flex group cursor-pointer",onClick:i},[s("div",C,[s("img",{src:l.value,alt:"",class:"object-contain h-full w-auto"},null,8,L)]),s("div",R,[s("div",S,[s("div",U,p(d.item.TenSach),1),s("div",E,p(d.item.TacGia),1)])])]),o[0]||(o[0]=s("div",{class:"w-full h-4/6 flex justify-end bg-[#FFD573] rounded-xl"},null,-1))]))}},Q=N(O,[["__scopeId","data-v-0eff1d61"]]),T={class:"flex-1 rounded-xl flex flex-col overflow-hidden relative pl-5 bg-white"},V={key:0,class:"w-full h-fit pb-5 flex"},K={class:"py-2 px-5 rounded-xl font-semibold hover:bg-[#FEF6DF]"},G={key:1,class:"w-full h-fit pb-5 flex flex-col"},M={class:"flex"},z={class:"p-2"},A={key:0},H={class:"flex-1 overflow-y-auto pr-4",style:{"scrollbar-gutter":"stable"}},J={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2"},Y={__name:"resultSearch",setup(d){w();const c=I(),u=_(),l=m([]),f=()=>{u.go(-1)},i=m(!0),a=async t=>{try{const e=await h.getOne(t);l.value=e,o.value="",l.value.length===0?i.value=!0:i.value=!1}catch(e){console.log(e),i.value=!0}},o=m(""),y=async t=>{try{const e=await h.getBookByCategory(t);l.value=e.books,o.value=e.categoryName}catch(e){console.error(e)}};return v(()=>c.query.searchQuery,(t,e)=>{t!==e&&a(t)}),g(()=>{const t=c.query.searchQuery,e=c.params.id;t?a(t):e&&y(e)}),(t,e)=>(r(),n("div",T,[o.value!==""?(r(),n("div",V,[s("span",{class:"py-2 px-5 rounded-xl font-semibold hover:bg-[#FEF6DF] cursor-pointer",onClick:f},"Danh mục"),e[0]||(e[0]=s("span",{class:"p-2"}," > ",-1)),s("span",K,p(o.value),1)])):(r(),n("div",G,[s("div",M,[e[1]||(e[1]=s("span",{class:"p-2"},"Kết quả tìm kiếm của: ",-1)),s("span",z,p(B(c).query.searchQuery),1)]),i.value===!0?(r(),n("div",A,e[2]||(e[2]=[s("span",{class:"p-2 text-lg"},"Không có kết quả trùng khớp với yêu cầu!",-1)]))):F("",!0)])),s("div",H,[s("div",J,[(r(!0),n($,null,D(l.value,(b,x)=>(r(),n("div",{class:"flex h-56 w-full mb-2",key:x},[q(Q,{item:b},null,8,["item"])]))),128))])])]))}};export{Y as default};
